#!{{ lookPath "bash" }}

TVERREC_URL=https://github.com/dongaba/TVerRec/archive/refs/tags/v3.0.2.tar.gz
ARCHIVE=$(basename $(echo $TVERREC_URL))

{{ if eq .chezmoi.os "darwin" }}

pipx install pywal
pipx ensurepath

cd
git clone https://github.com/Nellousan/px2ansi.git
cd px2ansi
pipx install .

{{ end }}

{{ if eq .chezmoi.os "linux" }}

cd
mkdir powershell && cd powershell
wget https://github.com/PowerShell/PowerShell/releases/download/v7.2.13/powershell-7.2.13-linux-arm64.tar.gz
tar xvzf powershell-7.2.13-linux-arm64.tar.gz
ln -s $HOME/powershell/pwsh /usr/bin/pwsh

{{ end }}

cd
go install github.com/orangekame3/paclear@latest

cd
git clone http://github.com/possatti/pokemonsay
cd pokemonsay
./install.sh

cd
wget $TVERREC_URL && tar xvzf $ARCHIVE && rm $ARCHIVE
cd $HOME/TVerRec*/conf/
cp system_setting.ps1 user_setting.ps1
cp $HOME/src/keyword.conf > keyword.conf

cd
wget https://github.com/autopawn/3d-ascii-viewer/archive/refs/tags/v1.4.0.tar.gz
tar xvzf v1.4.0.tar.gz && cd 3d-ascii-viewer*
make
find ./models -name "*.mtl" -type f | xargs rm
mv 3d-ascii-viewer $HOME/bin/.
mv models/ $HOME/Documents/.
cd && rm -rf 3d-ascii-viewer* v1.4.0.tar.gz
